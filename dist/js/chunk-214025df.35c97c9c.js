(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-214025df"],{"0390":function(t,e,a){},"0e29":function(t,e,a){"use strict";a("89be")},"22ad":function(t,e,a){"use strict";a("5e32")},"4dd2":function(t,e,a){},"5e32":function(t,e,a){},6918:function(t,e,a){"use strict";a("0390")},"89be":function(t,e,a){},"95ee":function(t,e,a){},"96b8":function(t,e,a){"use strict";var i=a("7a23");const s=t=>(Object(i["C"])("data-v-1f0ee0ac"),t=t(),Object(i["A"])(),t),r={class:"modal fade",ref:"modal",id:"AlertModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},c={class:"modal-dialog modal-dialog-centered alert-modal"},d={class:"modal-content"},o={class:"modal-body alert-modal-body"},l=s(()=>Object(i["h"])("div",{class:"circle"},[Object(i["h"])("div",{class:"line"})],-1)),n={class:"mt-3"},b=s(()=>Object(i["h"])("div",{class:"modal-footer"},[Object(i["h"])("button",{type:"button",class:"btn submit-btn","data-bs-dismiss":"modal"},"確認")],-1));function u(t,e,a,s,u,h){return Object(i["z"])(),Object(i["g"])("div",null,[Object(i["h"])("div",r,[Object(i["h"])("div",c,[Object(i["h"])("div",d,[Object(i["h"])("div",o,[l,Object(i["h"])("h2",n,Object(i["L"])(a.title),1)]),b])])],512)])}var h=a("e0ae"),p={mixins:[h["a"]],props:{title:{type:String,default:"成功新增到我的最愛"}}},g=(a("6918"),a("6b0d")),j=a.n(g);const m=j()(p,[["render",u],["__scopeId","data-v-1f0ee0ac"]]);e["a"]=m},"9d1f":function(t,e,a){"use strict";a("4dd2")},caf9:function(t,e,a){"use strict";a("95ee")},e015:function(t,e,a){"use strict";var i=a("7a23");function s(t,e,a,s,r,c){return Object(i["z"])(),Object(i["g"])("div",{class:"cart-banner",style:Object(i["t"])(r.baseStyle)},[Object(i["h"])("h2",{style:Object(i["t"])(r.boderStyle)},Object(i["L"])(a.title),5)],4)}var r={props:{title:{type:String,default:"請輸入title"},imgUrl:{type:String},fontColor:{type:String,default:"#F7F1F0"},boderColor:{type:String,default:"#F7F1F0"}},data(){return{baseStyle:{backgroundImage:`url(${this.imgUrl})`,color:this.fontColor},boderStyle:{borderBottom:"5px double "+this.boderColor}}}},c=(a("0e29"),a("6b0d")),d=a.n(c);const o=d()(r,[["render",s],["__scopeId","data-v-66073782"]]);e["a"]=o},f304:function(t,e,a){"use strict";a.r(e);var i=a("7a23");const s=t=>(Object(i["C"])("data-v-2ab1bbc3"),t=t(),Object(i["A"])(),t),r={class:"products"},c={class:"container-xl"},d={class:"row"},o={class:"col-12 col-md-4 offset-md-8 ml-2"},l={class:"search-wrap"},n={class:"input-group"},b=s(()=>Object(i["h"])("span",{class:"input-group-text",id:"basic-addon1"},[Object(i["h"])("i",{class:"bi bi-search"})],-1)),u={class:"row main"};function h(t,e,a,s,h,p){const g=Object(i["I"])("AlertModal"),j=Object(i["I"])("HomeLoading"),m=Object(i["I"])("CartBanner"),O=Object(i["I"])("sidebar"),v=Object(i["I"])("ProductsItems"),f=Object(i["I"])("delModal");return Object(i["z"])(),Object(i["g"])("div",r,[Object(i["k"])(g,{ref:"alertModal"},null,512),Object(i["k"])(j,{isLoading:h.isLoading},null,8,["isLoading"]),Object(i["k"])(m,{title:"商品列表",imgUrl:"https://images.unsplash.com/photo-1557761830-8d36eedd1718?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1470&q=80",fontColor:"#F7F1F0",boderColor:"#F7F1F0"}),Object(i["h"])("div",c,[Object(i["h"])("div",d,[Object(i["h"])("div",o,[Object(i["h"])("div",l,[Object(i["h"])("div",n,[b,Object(i["V"])(Object(i["h"])("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>h.search=t),class:"form-control",placeholder:"請輸入關鍵字...","aria-label":"search","aria-describedby":"basic-addon1"},null,512),[[i["P"],h.search]])])])])]),Object(i["h"])("div",u,[Object(i["k"])(O,{sidebarList:h.sidebarList,sidebarTarget:h.sidebarTarget,isLoading:h.isLoading,onChangeSidebar:p.changeSidebarHandler},null,8,["sidebarList","sidebarTarget","isLoading","onChangeSidebar"]),Object(i["k"])(v,{products:p.productsFilter,onAddCartHandler:p.addCart,loadingItem:h.status.loadingItem,onSetFavoriteHandler:t.setFavorite,onRemoveFavoriteHandler:p.removeFavItemButton,FavoriteItems:h.FavoriteItems,onOpenAlertModalHandler:p.openAlertModal,searchTitle:h.search},null,8,["products","onAddCartHandler","loadingItem","onSetFavoriteHandler","onRemoveFavoriteHandler","FavoriteItems","onOpenAlertModalHandler","searchTitle"])])]),Object(i["k"])(f,{ref:"favDelModal",delTitle:t.delTitle,delProductId:t.delProductId,onRemoveFavItemHandler:e[1]||(e[1]=e=>p.removeFavItem(t.delTitle))},null,8,["delTitle","delProductId"])])}a("14d9");var p=a("667c"),g=a("96b8"),j=a("e015");const m={key:0,class:"sidebar col-md-3 col-lg-2"},O={class:"sidebar-lists"},v=["onClick"];function f(t,e,a,s,r,c){return a.isLoading?Object(i["f"])("",!0):(Object(i["z"])(),Object(i["g"])("nav",m,[Object(i["h"])("ul",O,[Object(i["h"])("li",{class:Object(i["s"])(["sidebar-lists-item",{active:"全部商品"==a.sidebarTarget}]),onClick:e[0]||(e[0]=t=>c.chageSidebar("全部商品"))}," 全部商品",2),(Object(i["z"])(!0),Object(i["g"])(i["a"],null,Object(i["G"])(a.sidebarList,t=>(Object(i["z"])(),Object(i["g"])("li",{class:Object(i["s"])(["sidebar-lists-item",{active:a.sidebarTarget==t}]),key:t,onClick:e=>c.chageSidebar(t)},Object(i["L"])(t),11,v))),128))])]))}var y={props:{sidebarTarget:{type:String},sidebarList:{type:Array},isLoading:{type:Boolean}},methods:{chageSidebar(t){this.$emit("changeSidebar",t)}}},I=(a("caf9"),a("6b0d")),F=a.n(I);const k=F()(y,[["render",f],["__scopeId","data-v-563e0374"]]);var C=k;const T=t=>(Object(i["C"])("data-v-0a1a3f21"),t=t(),Object(i["A"])(),t),L={key:0,class:"products-items col-md-9 col-lg-10"},S={class:"container"},M={class:"row mt-4 gx-3"},$={class:"card-item"},x=["onClick"],H=T(()=>Object(i["h"])("i",{class:"bi bi-hand-index-thumb-fill"},null,-1)),w=[H],A={class:"card-body"},z={class:"card-title"},P={class:"card-title"},_={class:"card-body-bottom"},D={class:"price-lists"},B={class:"origin-price"},U={class:"price"},G={class:"button-lists"},R=["onClick"],V=T(()=>Object(i["h"])("i",{class:"bi bi-bookmark"},null,-1)),q=[V],J=["onClick"],N=T(()=>Object(i["h"])("i",{class:"bi bi-bookmark-fill"},null,-1)),E=[N],W=["onClick","disabled"],Y={key:0,class:"bi bi-cart3"},K={key:1,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},Q={key:1,class:"col-md-9 col-lg-10 empty"};function X(t,e,a,s,r,c){return 0!==a.products.length?(Object(i["z"])(),Object(i["g"])("div",L,[Object(i["h"])("div",S,[Object(i["h"])("div",M,[(Object(i["z"])(!0),Object(i["g"])(i["a"],null,Object(i["G"])(a.products,e=>(Object(i["z"])(),Object(i["g"])("div",{class:"card col-sm-6 col-md-6 col-lg-3",key:e.id},[Object(i["h"])("div",$,[Object(i["h"])("div",{class:"card-item-img",style:Object(i["t"])({backgroundImage:`url(${e.imageUrl})`})},[Object(i["h"])("div",{class:"enter-item",onClick:t=>c.getProduct(e.id)},w,8,x)],4),Object(i["h"])("div",A,[Object(i["h"])("h5",z,Object(i["L"])(e.title.split("-")[0]),1),Object(i["h"])("h5",P,Object(i["L"])(e.title.split("-")[1]),1),Object(i["h"])("div",_,[Object(i["h"])("div",D,[Object(i["h"])("span",B,"$"+Object(i["L"])(t.$filters.currency(e.origin_price)),1),Object(i["h"])("span",U,"$"+Object(i["L"])(t.$filters.currency(e.price)),1)]),Object(i["h"])("div",G,[-1===c.isFavoriteItems(e.id)?(Object(i["z"])(),Object(i["g"])("button",{key:0,class:"btn fav-btn",onClick:t=>c.setFavorite(e.id)},q,8,R)):(Object(i["z"])(),Object(i["g"])("button",{key:1,class:"btn fav-btn",onClick:t=>c.removeFavorite(e.id,e.title)},E,8,J)),Object(i["h"])("button",{class:"btn cart-btn",onClick:t=>c.addToCart(e.id,e.title),disabled:a.loadingItem===e.id},[a.loadingItem!==e.id?(Object(i["z"])(),Object(i["g"])("i",Y)):(Object(i["z"])(),Object(i["g"])("span",K))],8,W)])])])])]))),128))])])])):(Object(i["z"])(),Object(i["g"])("div",Q,[Object(i["h"])("h2",null,[Object(i["j"])("搜尋不到"),Object(i["h"])("span",null,Object(i["L"])(a.searchTitle),1),Object(i["j"])("的商品，請重新查詢！")])]))}var Z={props:{sidebarTarget:{type:String,default:"全部商品"},products:{type:Array,default:()=>[]},loadingItem:{type:String,default:""},FavoriteItems:{type:Array},searchTitle:{type:String}},methods:{getProduct(t){this.$router.push("/product/"+t)},addToCart(t,e){this.$emit("addCartHandler",{productId:t,productTitle:e})},setFavorite(t){this.$emit("openAlertModalHandler"),this.$emit("setFavoriteHandler",t)},removeFavorite(t,e){this.$emit("removeFavoriteHandler",{productId:t,productTitle:e})},isFavoriteItems(t){return this.FavoriteItems.findIndex(e=>e===t)}}};a("9d1f");const tt=F()(Z,[["render",X],["__scopeId","data-v-0a1a3f21"]]);var et=tt,at=a("cfb9"),it=a("796c"),st={mixins:[it["a"]],components:{Sidebar:C,ProductsItems:et,CartBanner:j["a"],delModal:p["a"],AlertModal:g["a"]},data(){return{products:[],FavoriteItems:[],favoriteFilter:[],isLoading:!1,sidebarTarget:"全部商品",sidebarList:[],pagination:{},status:{loadingItem:""},search:""}},computed:{productsFilter(){let t=this.products.filter(t=>"全部商品"===this.sidebarTarget?t:t.category===this.sidebarTarget);return""!==this.search&&(t=t.filter(t=>t.title.match(this.search))),t}},methods:{getProducts(t=1){const e="https://vue3-course-api.hexschool.io/api/dongyang-api/products/all";this.isLoading=!0,this.$http.get(e).then(t=>{this.isLoading=!1,t.data.success&&(this.products=t.data.products,this.pagination=t.data.pagination,this.getSidebar(),this.updateSibarTarget(),this.favoriteInit())})},getProduct(t){this.$router.push("/product/"+t)},getSidebar(){const t=[];this.products.forEach(e=>{t.push(e.category)}),this.sidebarList=[...new Set(t)]},changeSidebarHandler(t){this.sidebarTarget=t,"lists"!==this.$route.params.sidebarTarget&&(this.isFavorite=!1,this.$router.replace("/productslist/lists"))},updateSibarTarget(){const t=this.$route.params.sidebarTarget,e=this.sidebarList.some(e=>e===t);e&&(this.sidebarTarget=this.$route.params.sidebarTarget+"")},addCart({productTitle:t,productId:e},a=1){const i="https://vue3-course-api.hexschool.io/api/dongyang-api/cart",s={data:{product_id:e,qty:a}};this.status.loadingItem=e,this.$http.post(i,s).then(e=>{e.data.success&&(at["a"].emit("push-message",{style:"success",title:""+t,actionText:"新增至購物車"}),this.status.loadingItem="",this.updateNavCartLength())})},updateNavCartLength(){at["a"].emit("updateCartLength")},openDelModal(){this.$refs.favDelModal.showModal()},hideDelModal(){this.$refs.favDelModal.hideModal()},removeFavItemButton({productId:t,productTitle:e}){this.delProductId=t,this.delTitle=e,this.openDelModal()},removeFavItem(t){this.removeFavorite(this.delProductId),this.hideDelModal(),at["a"].emit("push-message",{style:"success",title:""+t,actionText:"取消關注成功"})},openAlertModal(){this.$refs.alertModal.showModal()}},created(){this.getProducts()}};a("22ad");const rt=F()(st,[["render",h],["__scopeId","data-v-2ab1bbc3"]]);e["default"]=rt}}]);
//# sourceMappingURL=chunk-214025df.35c97c9c.js.map