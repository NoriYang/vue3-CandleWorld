(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5c79c03d"],{"08fa":function(e,t,a){"use strict";a("88a6")},"2ac5":function(e,t,a){},"36c0":function(e,t,a){"use strict";var s=a("7a23");function c(e,t,a,c,l,o){return Object(s["z"])(),Object(s["g"])("div",{class:"cart-banner",style:Object(s["t"])(l.baseStyle)},[Object(s["h"])("h2",{style:Object(s["t"])(l.boderStyle)},Object(s["L"])(a.title),5)],4)}var l={props:{title:{type:String,default:"請輸入title"},imgUrl:{type:String},fontColor:{type:String,default:"#F7F1F0"},boderColor:{type:String,default:"#F7F1F0"}},data(){return{baseStyle:{backgroundImage:`url(${this.imgUrl})`,color:this.fontColor},boderStyle:{borderBottom:"5px double "+this.boderColor}}}},o=(a("dd57"),a("6b0d")),r=a.n(o);const n=r()(l,[["render",c],["__scopeId","data-v-366a916f"]]);t["a"]=n},"3adc":function(e,t,a){"use strict";a("5eac")},"46b8":function(e,t,a){"use strict";a("2ac5")},"5eac":function(e,t,a){},"68c2":function(e,t,a){"use strict";a.r(t);var s=a("7a23");const c=e=>(Object(s["C"])("data-v-f726b7f0"),e=e(),Object(s["A"])(),e),l={class:"checkorder-main container"},o={class:"back-button"},r=c(()=>Object(s["h"])("i",{class:"bi bi-arrow-left"},null,-1)),n={class:"row gx-5"},i={class:"col-12 col-md-12 col-lg-5"},d={class:"col-12 col-md-12 col-lg-7"};function b(e,t,a,c,b,u){const h=Object(s["I"])("OrderBanner"),O=Object(s["I"])("HomeLoading"),j=Object(s["I"])("router-link"),m=Object(s["I"])("OrderLists"),p=Object(s["I"])("OrderForm");return Object(s["z"])(),Object(s["g"])("div",null,[Object(s["k"])(h,{title:"填寫訂單",imgUrl:"https://images.unsplash.com/photo-1602693875034-52c6b2e79785?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1025&q=80",fontColor:"#F7F1F0",boderColor:"#F7F1F0"}),Object(s["h"])("div",l,[Object(s["k"])(O,{isLoading:b.isLoading},null,8,["isLoading"]),Object(s["h"])("div",o,[Object(s["k"])(j,{to:"/home/Shoppingcart"},{default:Object(s["U"])(()=>[r,Object(s["j"])(" 回購物車 ")]),_:1})]),Object(s["h"])("div",n,[Object(s["h"])("div",i,[Object(s["k"])(m,{cartLists:b.cartLists,total:b.total,finalTotal:b.finalTotal,onSetCouponHandler:u.setCoupon},null,8,["cartLists","total","finalTotal","onSetCouponHandler"])]),Object(s["h"])("div",d,[Object(s["k"])(p,{onCreateOrderHandler:u.createOrder},null,8,["onCreateOrderHandler"])])])])])}var u=a("36c0");const h={class:"order-lists-wrap"},O={class:"order-lists"},j=Object(s["h"])("h2",{class:"table-title"},"購物清單",-1),m={class:"table"},p=Object(s["h"])("thead",{class:"table-thead"},[Object(s["h"])("tr",null,[Object(s["h"])("th",{class:"list-title"},"品名"),Object(s["h"])("th",{class:"list-qty"},"數量"),Object(s["h"])("th",{class:"list-price"},"單價")])],-1),f={class:"table-tbody"},v={class:"list-title"},g={class:"list-price"},y=Object(s["h"])("td",null,null,-1),k={class:"order-info"},C={class:"info-list"},L=Object(s["h"])("div",null,"商品數",-1),w={class:"info-list"},F=Object(s["h"])("div",null,"商品總額",-1),x={class:"info-list discount-text"},V=Object(s["h"])("div",null,"折價",-1),$={class:"info-list total-price-text"},S=Object(s["h"])("div",null,"總計",-1),I={class:"coupon-wrap"},U=["disabled"];function H(e,t,a,c,l,o){return Object(s["z"])(),Object(s["g"])("div",h,[Object(s["h"])("div",O,[j,Object(s["h"])("table",m,[p,Object(s["h"])("tbody",f,[(Object(s["z"])(!0),Object(s["g"])(s["a"],null,Object(s["G"])(a.cartLists,t=>(Object(s["z"])(),Object(s["g"])("tr",{key:t.id},[Object(s["h"])("td",v,Object(s["L"])(t.product.title),1),Object(s["h"])("td",null,Object(s["L"])(t.qty),1),Object(s["h"])("td",g,Object(s["L"])(e.$filters.currency(t.product.price)),1),y]))),128))])]),Object(s["h"])("div",k,[Object(s["h"])("div",C,[L,Object(s["h"])("div",null,Object(s["L"])(a.cartLists.length),1)]),Object(s["h"])("div",w,[F,Object(s["h"])("div",null,Object(s["L"])(e.$filters.currency(a.total)),1)]),Object(s["h"])("div",x,[V,Object(s["h"])("div",null,Object(s["L"])(e.$filters.currency(a.total-a.finalTotal)),1)]),Object(s["h"])("div",$,[S,Object(s["h"])("div",null,Object(s["L"])(e.$filters.currency(a.finalTotal)),1)])]),Object(s["h"])("div",I,[Object(s["V"])(Object(s["h"])("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>l.couponCode=e),placeholder:"請輸入折扣碼"},null,512),[[s["P"],l.couponCode]]),Object(s["h"])("button",{onClick:t[1]||(t[1]=(...e)=>o.setCoupon&&o.setCoupon(...e)),disabled:""===l.couponCode},"確認",8,U)])])])}var T={props:{cartLists:{type:Array},total:{type:Number},finalTotal:{type:Number}},data(){return{couponCode:""}},methods:{setCoupon(){this.$emit("setCouponHandler",this.couponCode)}}},_=(a("3adc"),a("6b0d")),q=a.n(_);const z=q()(T,[["render",H]]);var P=z;const B={class:"order-form-wrap"},M={class:"order-forms"},A=Object(s["h"])("h2",{class:"form-title"},"訂購人資訊",-1),G={class:"order-form row justify-content-center"},D={class:"input-wrap"},E=Object(s["h"])("label",{for:"name",class:"form-label"},[Object(s["j"])("姓名"),Object(s["h"])("span",null,"*")],-1),J={class:"input-wrap"},N=Object(s["h"])("label",{for:"email",class:"form-label"},[Object(s["j"])("信箱"),Object(s["h"])("span",null,"*")],-1),W={class:"input-wrap"},Y=Object(s["h"])("label",{for:"phone",class:"form-label"},[Object(s["j"])("電話"),Object(s["h"])("span",null,"*")],-1),K={class:"input-wrap"},Q=Object(s["h"])("label",{for:"address",class:"form-label"},[Object(s["j"])("地址"),Object(s["h"])("span",null,"*")],-1),R={class:"input-wrap"},X=Object(s["h"])("label",{for:"message",class:"form-label"},"備註",-1),Z={class:"buttons-wrap"},ee=["disabled"];function te(e,t,a,c,l,o){const r=Object(s["I"])("VField"),n=Object(s["I"])("ErrorMessage"),i=Object(s["I"])("VForm");return Object(s["z"])(),Object(s["g"])("div",B,[Object(s["h"])("div",M,[A,Object(s["h"])("div",G,[Object(s["k"])(i,{class:"order-form-main",ref:"orderForm",onSubmit:o.createOrder},{default:Object(s["U"])(({meta:e,errors:a})=>[Object(s["h"])("div",D,[E,Object(s["k"])(r,{modelValue:l.form.user.name,"onUpdate:modelValue":t[0]||(t[0]=e=>l.form.user.name=e),name:"name",type:"text",rules:"required",class:Object(s["s"])(["form-control",{"is-invalid":a["name"]}]),placeholder:"請輸入姓名"},null,8,["modelValue","class"]),Object(s["k"])(n,{class:"invalid-feedback",name:"name"})]),Object(s["h"])("div",J,[N,Object(s["k"])(r,{modelValue:l.form.user.email,"onUpdate:modelValue":t[1]||(t[1]=e=>l.form.user.email=e),name:"email",type:"email",rules:"required|email",class:Object(s["s"])(["form-control",{"is-invalid":a["email"]}]),placeholder:"example@email.com"},null,8,["modelValue","class"]),Object(s["k"])(n,{class:"invalid-feedback",name:"email"})]),Object(s["h"])("div",W,[Y,Object(s["k"])(r,{modelValue:l.form.user.tel,"onUpdate:modelValue":t[2]||(t[2]=e=>l.form.user.tel=e),name:"phone",type:"text",rules:o.isPhone,class:Object(s["s"])(["form-control",{"is-invalid":a["phone"]}]),placeholder:"請輸入電話"},null,8,["modelValue","rules","class"]),Object(s["k"])(n,{class:"invalid-feedback",name:"phone"})]),Object(s["h"])("div",K,[Q,Object(s["k"])(r,{modelValue:l.form.user.address,"onUpdate:modelValue":t[3]||(t[3]=e=>l.form.user.address=e),name:"address",type:"text",rules:"required",class:Object(s["s"])(["form-control",{"is-invalid":a["address"]}]),placeholder:"請輸入地址"},null,8,["modelValue","class"]),Object(s["k"])(n,{class:"invalid-feedback",name:"address"})]),Object(s["h"])("div",R,[X,Object(s["V"])(Object(s["h"])("textarea",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.form.message=e),class:"form-control",id:"form-message"},null,512),[[s["P"],l.form.message]])]),Object(s["h"])("div",Z,[Object(s["h"])("button",{type:"button",class:"reset-btn btn btn-outline-danger",onClick:t[5]||(t[5]=(...e)=>o.resetForm&&o.resetForm(...e))},"重設"),Object(s["h"])("button",{type:"submit",class:"submit-btn",disabled:!e.valid},"送出",8,ee)])]),_:1},8,["onSubmit"])])])])}var ae={data(){return{form:{user:{name:"",email:"",phone:"",address:""},message:""}}},methods:{resetForm(){this.$refs.orderForm.resetForm(),this.message=""},isPhone(e){const t=/^(09)[0-9]{8}$/;return!!t.test(e)||"需要正確的電話號碼"},createOrder(){this.$emit("createOrderHandler",this.form)}}};a("08fa");const se=q()(ae,[["render",te]]);var ce=se,le={components:{OrderBanner:u["a"],OrderLists:P,OrderForm:ce},data(){return{isLoading:!1,cartLists:[],total:0,finalTotal:0,couponCode:""}},methods:{getCart(){const e="https://vue3-course-api.hexschool.io/api/dongyang-api/cart";this.isLoading=!0,this.$http.get(e).then(e=>{this.isLoading=!1,e.data.success&&(this.cartLists=e.data.data.carts,0===this.cartLists.length&&this.$router.replace("/home/productslist/lists"),this.getPrice())})},getPrice(){let e=0,t=0;this.cartLists.forEach(a=>{e+=a.total,t+=a.final_total}),this.total=e,this.finalTotal=t},setCoupon(e){const t="https://vue3-course-api.hexschool.io/api/dongyang-api/coupon",a={data:{code:e}};this.$http.post(t,a).then(e=>{this.getCart()})},createOrder(e){const t="https://vue3-course-api.hexschool.io/api/dongyang-api/order";this.$http.post(t,{data:e}).then(e=>{if(e.data.success){const t=e.data.orderId;this.$router.replace("checkout/"+t)}})}},created(){this.getCart()}};a("46b8");const oe=q()(le,[["render",b],["__scopeId","data-v-f726b7f0"]]);t["default"]=oe},"84d3":function(e,t,a){},"88a6":function(e,t,a){},dd57:function(e,t,a){"use strict";a("84d3")}}]);
//# sourceMappingURL=chunk-5c79c03d.16206d5f.js.map