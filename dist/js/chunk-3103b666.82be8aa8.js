(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3103b666"],{"118d":function(t,e,a){"use strict";a("92dc")},"1e96":function(t,e,a){"use strict";var i=a("7a23");const d={class:"modal fade",ref:"modal",id:"AlertModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},s=Object(i["i"])('<div class="modal-dialog modal-dialog-centered alert-modal" data-v-33907840><div class="modal-content" data-v-33907840><div class="modal-body alert-modal-body" data-v-33907840><div class="circle" data-v-33907840><div class="line" data-v-33907840></div></div><h2 class="mt-3" data-v-33907840>成功新增到我的最愛</h2></div><div class="modal-footer" data-v-33907840><button type="button" class="btn btn-outline-success" data-bs-dismiss="modal" data-v-33907840>確認</button></div></div></div>',1),r=[s];function o(t,e,a,s,o,c){return Object(i["z"])(),Object(i["g"])("div",null,[Object(i["h"])("div",d,r,512)])}var c=a("e0ae"),l={mixins:[c["a"]]},n=(a("ce14"),a("6b0d")),b=a.n(n);const u=b()(l,[["render",o],["__scopeId","data-v-33907840"]]);e["a"]=u},"1f44":function(t,e,a){"use strict";a("f6a7")},"36c0":function(t,e,a){"use strict";var i=a("7a23");function d(t,e,a,d,s,r){return Object(i["z"])(),Object(i["g"])("div",{class:"cart-banner",style:Object(i["t"])(s.baseStyle)},[Object(i["h"])("h2",{style:Object(i["t"])(s.boderStyle)},Object(i["L"])(a.title),5)],4)}var s={props:{title:{type:String,default:"請輸入title"},imgUrl:{type:String},fontColor:{type:String,default:"#F7F1F0"},boderColor:{type:String,default:"#F7F1F0"}},data(){return{baseStyle:{backgroundImage:`url(${this.imgUrl})`,color:this.fontColor},boderStyle:{borderBottom:"5px double "+this.boderColor}}}},r=(a("dd57"),a("6b0d")),o=a.n(r);const c=o()(s,[["render",d],["__scopeId","data-v-366a916f"]]);e["a"]=c},"84d3":function(t,e,a){},"92dc":function(t,e,a){},b2dd:function(t,e,a){},c8ee:function(t,e,a){"use strict";a.r(e);var i=a("7a23");const d={class:"products"},s={class:"container-xl"},r={class:"row main"};function o(t,e,a,o,c,l){const n=Object(i["I"])("AlertModal"),b=Object(i["I"])("HomeLoading"),u=Object(i["I"])("CartBanner"),h=Object(i["I"])("sidebar"),p=Object(i["I"])("ProductsItems"),g=Object(i["I"])("delModal");return Object(i["z"])(),Object(i["g"])("div",d,[Object(i["k"])(n,{ref:"alertModal"},null,512),Object(i["k"])(b,{isLoading:c.isLoading},null,8,["isLoading"]),Object(i["k"])(u,{title:"商品列表",imgUrl:"https://images.unsplash.com/photo-1557761830-8d36eedd1718?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1470&q=80",fontColor:"#F7F1F0",boderColor:"#F7F1F0"}),Object(i["h"])("div",s,[Object(i["h"])("div",r,[Object(i["k"])(h,{sidebarList:c.sidebarList,sidebarTarget:c.sidebarTarget,isLoading:c.isLoading,onChangeSidebar:l.changeSidebarHandler},null,8,["sidebarList","sidebarTarget","isLoading","onChangeSidebar"]),Object(i["k"])(p,{products:l.productsFilter,onAddCartHandler:l.addCart,loadingItem:c.status.loadingItem,onSetFavoriteHandler:t.setFavorite,onRemoveFavoriteHandler:l.removeFavItemButton,FavoriteItems:c.FavoriteItems,onOpenAlertModalHandler:l.openAlertModal},null,8,["products","onAddCartHandler","loadingItem","onSetFavoriteHandler","onRemoveFavoriteHandler","FavoriteItems","onOpenAlertModalHandler"])])]),Object(i["k"])(g,{ref:"favDelModal",delTitle:t.delTitle,delProductId:t.delProductId,onRemoveFavItemHandler:l.removeFavItem},null,8,["delTitle","delProductId","onRemoveFavItemHandler"])])}a("14d9");var c=a("1e96"),l=a("9651"),n=a("36c0");const b={key:0,class:"sidebar col-md-3 col-lg-2"},u={class:"sidebar-lists"},h=["onClick"];function p(t,e,a,d,s,r){return a.isLoading?Object(i["f"])("",!0):(Object(i["z"])(),Object(i["g"])("nav",b,[Object(i["h"])("ul",u,[Object(i["h"])("li",{class:Object(i["s"])(["sidebar-lists-item",{active:"全部商品"==a.sidebarTarget}]),onClick:e[0]||(e[0]=t=>r.chageSidebar("全部商品"))}," 全部商品",2),(Object(i["z"])(!0),Object(i["g"])(i["a"],null,Object(i["G"])(a.sidebarList,t=>(Object(i["z"])(),Object(i["g"])("li",{class:Object(i["s"])(["sidebar-lists-item",{active:a.sidebarTarget==t}]),key:t,onClick:e=>r.chageSidebar(t)},Object(i["L"])(t),11,h))),128))])]))}var g={props:{sidebarTarget:{type:String},sidebarList:{type:Array},isLoading:{type:Boolean}},methods:{chageSidebar(t){this.$emit("changeSidebar",t)}}},v=(a("1f44"),a("6b0d")),m=a.n(v);const O=m()(g,[["render",p],["__scopeId","data-v-d61e0cce"]]);var j=O;const f=t=>(Object(i["C"])("data-v-5c6d0a12"),t=t(),Object(i["A"])(),t),I={class:"products-items col-md-9 col-lg-10"},y={class:"container"},F={class:"row mt-4 gx-3"},k={class:"card-item"},C=["onClick"],L=f(()=>Object(i["h"])("i",{class:"bi bi-hand-index-thumb-fill"},null,-1)),S=[L],T={class:"card-body"},M={class:"card-title"},$={class:"card-title"},H={class:"card-body-bottom"},x={class:"price-lists"},w={class:"origin-price"},A={class:"price"},z={class:"button-lists"},P=["onClick"],_=f(()=>Object(i["h"])("i",{class:"bi bi-bookmark"},null,-1)),D=[_],B=["onClick"],G=f(()=>Object(i["h"])("i",{class:"bi bi-bookmark-fill"},null,-1)),R=[G],U=["onClick","disabled"],q={key:0,class:"bi bi-cart3"},J={key:1,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"};function N(t,e,a,d,s,r){return Object(i["z"])(),Object(i["g"])("div",I,[Object(i["h"])("div",y,[Object(i["h"])("div",F,[(Object(i["z"])(!0),Object(i["g"])(i["a"],null,Object(i["G"])(a.products,e=>(Object(i["z"])(),Object(i["g"])("div",{class:"card col-sm-6 col-md-6 col-lg-3",key:e.id},[Object(i["h"])("div",k,[Object(i["h"])("div",{class:"card-item-img",style:Object(i["t"])({backgroundImage:`url(${e.imageUrl})`})},[Object(i["h"])("div",{class:"enter-item",onClick:t=>r.getProduct(e.id)},S,8,C)],4),Object(i["h"])("div",T,[Object(i["h"])("h5",M,Object(i["L"])(e.title.split("-")[0]),1),Object(i["h"])("h5",$,Object(i["L"])(e.title.split("-")[1]),1),Object(i["h"])("div",H,[Object(i["h"])("div",x,[Object(i["h"])("span",w,"$"+Object(i["L"])(t.$filters.currency(e.origin_price)),1),Object(i["h"])("span",A,"$"+Object(i["L"])(t.$filters.currency(e.price)),1)]),Object(i["h"])("div",z,[-1===r.isFavoriteItems(e.id)?(Object(i["z"])(),Object(i["g"])("button",{key:0,class:"btn",onClick:t=>r.setFavorite(e.id)},D,8,P)):(Object(i["z"])(),Object(i["g"])("button",{key:1,class:"btn",onClick:t=>r.removeFavorite(e.id,e.title)},R,8,B)),Object(i["h"])("button",{class:"btn",onClick:t=>r.addToCart(e.id,e.title),disabled:a.loadingItem===e.id},[a.loadingItem!==e.id?(Object(i["z"])(),Object(i["g"])("i",q)):(Object(i["z"])(),Object(i["g"])("span",J))],8,U)])])])])]))),128))])])])}var E={props:{sidebarTarget:{type:String,default:"全部商品"},products:{type:Array,default:()=>[]},loadingItem:{type:String,default:""},FavoriteItems:{type:Array}},methods:{getProduct(t){this.$router.push("/home/product/"+t)},addToCart(t,e){this.$emit("addCartHandler",{productId:t,productTitle:e})},setFavorite(t){this.$emit("openAlertModalHandler"),this.$emit("setFavoriteHandler",t)},removeFavorite(t,e){this.$emit("removeFavoriteHandler",{productId:t,productTitle:e})},isFavoriteItems(t){return this.FavoriteItems.findIndex(e=>e===t)}}};a("118d");const V=m()(E,[["render",N],["__scopeId","data-v-5c6d0a12"]]);var W=V,Y=a("cfb9"),K=a("796c"),Q={mixins:[K["a"]],components:{Sidebar:j,ProductsItems:W,CartBanner:n["a"],delModal:l["a"],AlertModal:c["a"]},data(){return{products:[],FavoriteItems:[],favoriteFilter:[],isLoading:!1,sidebarTarget:"全部商品",sidebarList:[],pagination:{},status:{loadingItem:""}}},computed:{productsFilter(){return this.products.filter(t=>"全部商品"===this.sidebarTarget?t:t.category===this.sidebarTarget)}},methods:{getProducts(t=1){const e="https://vue3-course-api.hexschool.io/api/dongyang-api/products/all";this.isLoading=!0,this.$http.get(e).then(t=>{this.isLoading=!1,t.data.success&&(this.products=t.data.products,this.pagination=t.data.pagination,this.getSidebar(),this.updateSibarTarget(),this.favoriteInit())})},getProduct(t){this.$router.push("/home/product/"+t)},getSidebar(){const t=[];this.products.forEach(e=>{t.push(e.category)}),this.sidebarList=[...new Set(t)]},changeSidebarHandler(t){this.sidebarTarget=t,"lists"!==this.$route.params.sidebarTarget&&(this.isFavorite=!1,this.$router.replace("/home/productslist/lists"))},updateSibarTarget(){const t=this.$route.params.sidebarTarget,e=this.sidebarList.some(e=>e===t);e&&(this.sidebarTarget=this.$route.params.sidebarTarget+"")},addCart({productTitle:t,productId:e},a=1){const i="https://vue3-course-api.hexschool.io/api/dongyang-api/cart",d={data:{product_id:e,qty:a}};this.status.loadingItem=e,this.$http.post(i,d).then(e=>{e.data.success&&(Y["a"].emit("push-message",{style:"success",title:t+" 新增購物車成功"}),this.status.loadingItem="",this.updateNavCartLength())})},updateNavCartLength(){Y["a"].emit("updateCartLength")},openDelModal(){this.$refs.favDelModal.showModal()},hideDelModal(){this.$refs.favDelModal.hideModal()},removeFavItemButton({productId:t,productTitle:e}){this.delProductId=t,this.delTitle=e,this.openDelModal()},removeFavItem(){this.removeFavorite(this.delProductId),this.hideDelModal()},openAlertModal(){this.$refs.alertModal.showModal()}},created(){this.getProducts()}};const X=m()(Q,[["render",o]]);e["default"]=X},ce14:function(t,e,a){"use strict";a("b2dd")},dd57:function(t,e,a){"use strict";a("84d3")},f6a7:function(t,e,a){}}]);
//# sourceMappingURL=chunk-3103b666.82be8aa8.js.map